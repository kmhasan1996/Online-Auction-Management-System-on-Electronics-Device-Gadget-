@model  Auction.Web.ViewModels.TestimonialViewModel

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";

    const string imageUrl = "/Areas/Admin/Contents/Images/System/placeholder-image.png";
}



    <!-- Boxed -->
    <div class="boxed">
       
        <!-- Page title -->
        <div class="page-title parallax parallax1">
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <div class="page-title-heading">
                            <h1 class="title">Testimonials</h1>
                        </div><!-- /.page-title-heading -->
                        <div class="breadcrumbs">
                            <ul>
                                <li><a href="index.html">Home</a></li>
                                <li><a href="blog-list-1.html">Testimonial</a></li>
                            </ul>
                        </div><!-- /.breadcrumbs -->
                    </div><!-- /.col-md-12 -->
                </div><!-- /.row -->
            </div><!-- /.container -->
        </div><!-- /.page-title -->
        <!-- Blog posts -->
        <section class="blog-posts blog-detail">
            <div class="container">
                <div class="row">
                    <div class="col-md-9">

                        <div class="main-single">

                            <div class="comments-area">

                                @if (@Model.Testimonials.Count != null)
                                {
                                    <ol class="comment-list">
                                        @foreach (var comment in Model.Testimonials)
                                        {
                                            <li class="comment">
                                                <article class="comment-body">
                                                    <div class="comment-author">
                                                        <img src="@imageUrl" alt="image">
                                                    </div><!-- .comment-author -->
                                                    <div class="comment-text">
                                                        <div class="comment-metadata clearfix">
                                                            <h5>@comment.User.FirstName @comment.User.LastName</h5>
                                                            <span class="date">Date: @comment.DateTime</span>
                                                        </div><!-- .comment-metadata -->
                                                        <div class="comment-content text-justify">
                                                            <p>@comment.Comment</p>
                                                        </div>
                                                    </div><!-- .comment-content 

                                                    @*<div class="reply">
                                                            <a href="#" class="comment-like-link"><i class="fa fa-thumbs-up"></i>108</a>
                                                            <a href="#" class="comment-reply-link"><i class="fa fa-pencil-square-o"></i>Reply</a>
                                                        </div>*@
                                                    </div><!-- /.comment-text -->
                                                </article><!-- .comment-body -->

                                            </li><!-- #comment-## -->
                                        }
                                    </ol><!-- .comment-list -->
                                }
                                else
                                {
                                    <hr />
                                    <div class="alert alert-warning" role="alert">
                                        Sorry! No record found.
                                    </div>
                                }

                                <div class="comment-respond" id="respond">
                                    <div class="comment-reply-title">
                                        <h5>Write a Comment</h5>
                                        <p>Your email address will not be published. Required fields are marked *</p>
                                    </div>
                                    <form class="comment-form" id="testimonialForm">
                                        <p class="comment-form-comment">
                                            <label>Review*</label>
                                            <textarea class="" tabindex="4" id="Comment" name="Comment" required></textarea>
                                        </p>

                                        <p class="form-submit">
                                            <button id="submit" class="comment-submit">Submit</button>
                                        </p>
                                    </form>
                                </div><!-- /.comment-respond -->
                            </div><!-- /.comments-area -->
                        </div><!-- /.main-single -->
                    </div><!-- /.col-md-9 -->
                    <div class="col-md-3">
                        <div class="sidebar">
                            <div class="widget widget_tag">
                                <h5 class="widget-title">
                                    Categories
                                </h5>
                                <div class="tag-list">
                                    @foreach (var category in Model.FeaturedCategories)
                                    {


                                        <a href="@Url.Action("Index","Shop",new { categoryID=category.Id})" >@category.Name <span>(@category.Products.Count(x=>x.IsActive))</span></a>


                                    }
                                </div>
                            </div>

                        </div><!-- /.sidebar -->
                    </div><!-- /.col-md-3 -->
                </div><!-- /.row -->
            </div><!-- /.container -->
        </section><!-- /.blog posts -->

       
        <!-- Go Top -->
        <a class="go-top">
            <i class="fa fa-chevron-up"></i>
        </a>

    </div>

   
<script>
    $(document).ready(function () {

        $("#submit").click(function() {
            $.ajax({
                    type: "POST",
                    url: "/Testimonial/Add",
                    data: $("#testimonialForm").serialize()

                })
                .done(function(response) {
                    if (response.Success) {
                        Swal.fire({
                            title: 'Saved Successfully',
                            icon: 'success',
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'OK'
                        }).then((result) => {
                            if (result.value) {
                                window.location.reload();
                            }
                        });

                    }

                })
                .fail(function(xmlHttpRequest, textStatus, errorThrown) {
                    alert("Fail");
                });
        });
    });
</script>